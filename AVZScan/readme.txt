ZaitsevOleg@KL, 22.10.2007 14:46:40:
давай пройдемся по шагам,
1. Ты хочешть что-то почекать, тогда база бекапа тебе не нужна и ничего делать не требуется, все как сайчас.
2. когда ты собираешься что-то фиксить, ты командуешь ядру загрузить базу бекапа перед началом вызова скриптов с опцией FIX. Если базы нет (т.е. еще никто ничего не фиксил и откатывать нечего), то ничего не происходит
3. Все успешные фиксы порождают записи в бекапе (сколько их, как они привязываются к срипту и т.п. - не важно, это все происходит внутри и является моей головной болью). Важно, что в бекап что-то там записалось
4. После завершения вызова FIX процедур ты командуешь ядру сохранить базу. Если в ходе FIX в нее что-то дозаписалось, то база сохраняется на диск. 
Имя файла на шаге 1 и 4 идентично и задается с твойе стороны

ZaitsevOleg@KL, 14:47:03:
поправка, на шаге 2 и 4 ... там, где идет работа с бекапом

ZaitsevOleg@KL, 14:49:11:
теперь пошагово проврка, есть ли восстановление:
1. Ты командуешь загрузить базу бекапа. Если она есть - загрузится, нет - не загрузится (это не является ошибкой)
2. поочередно ты вызываешь скрипты с опцией CHECK_UNDO. На самом деле вызывается не скрипт, а нечто, что проверит, есть сли для данного скрипта бекап. Если есть - вернет признак что есть
Сохранять базу бекапа в даннос случае не надо (ничего не менялось), но сохранение не будет ошибкой

ZaitsevOleg@KL, 14:50:55:
пошагово восстановление:
1. Ты командуешь загрузить базу бекапа. Если она есть - загрузится, нет - не загрузится (это не является ошибкой). В данном слечае можно проверить, загрузилась ли база ...
2. поочередно ты вызываешь скрипты с опцией UNDO. Для них ведется бекап, и в случае его успешности записи бекапа удаляются из базы. Опять-же, на самом деле вызывается не скрипт, а нечто, что сделает откат
3. Сохраняешь базу бекапа (так как из нее были вычеркнуты выполненные элементы)
