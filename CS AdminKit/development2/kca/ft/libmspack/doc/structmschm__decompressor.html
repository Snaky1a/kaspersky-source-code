<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libmspack: mschm_decompressor struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>mschm_decompressor Struct Reference</h1>A decompressor for .CHM (Microsoft HTMLHelp) files.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="mspack_8h-source.html">mspack.h</a>&gt;</code>
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmschmd__header.html">mschmd_header</a> *(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o0">open</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a CHM helpfile and reads its contents.  <a href="#o0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o1">close</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__header.html">mschmd_header</a> *chm)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes a previously opened CHM helpfile.  <a href="#o1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o2">extract</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__file.html">mschmd_file</a> *file, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extracts a file from a CHM helpfile.  <a href="#o2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o3">last_error</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the error code set by the most recently called method.  <a href="#o3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmschmd__header.html">mschmd_header</a> *(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o4">fast_open</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a CHM helpfile quickly.  <a href="#o4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmschm__decompressor.html#o5">fast_find</a> )(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__header.html">mschmd_header</a> *chm, char *filename, struct <a class="el" href="structmschmd__file.html">mschmd_file</a> *f_ptr, int f_size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds file details quickly.  <a href="#o5"></a><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A decompressor for .CHM (Microsoft HTMLHelp) files. 
<p>
All fields are READ ONLY.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="mspack_8h.html#a61">mspack_create_chm_decompressor()</a>, <a class="el" href="mspack_8h.html#a63">mspack_destroy_chm_decompressor()</a> </dd></dl>

<p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="o1" doxytag="mschm_decompressor::close" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void(* <a class="el" href="structmschm__decompressor.html#o1">mschm_decompressor::close</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__header.html">mschmd_header</a> *chm)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes a previously opened CHM helpfile. 
<p>
This closes a CHM helpfile, frees the <a class="el" href="structmschmd__header.html">mschmd_header</a> and all <a class="el" href="structmschmd__file.html">mschmd_file</a> structures associated with it (if any). This works on both helpfiles opened with <a class="el" href="structmschm__decompressor.html#o0">open()</a> and helpfiles opened with <a class="el" href="structmschm__decompressor.html#o4">fast_open()</a>.<p>
The CHM header pointer is now invalid and cannot be used again. All <a class="el" href="structmschmd__file.html">mschmd_file</a> pointers referencing that CHM are also now invalid, and cannot be used again.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the mschm_decompressor instance being called </td></tr>
    <tr><td valign=top><em>chm</em>&nbsp;</td><td>the CHM helpfile to close </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmschm__decompressor.html#o0">open()</a>, <a class="el" href="structmschm__decompressor.html#o4">fast_open()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="o2" doxytag="mschm_decompressor::extract" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int(* <a class="el" href="structmschm__decompressor.html#o2">mschm_decompressor::extract</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__file.html">mschmd_file</a> *file, char *filename)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Extracts a file from a CHM helpfile. 
<p>
This extracts a file from a CHM helpfile and writes it to the given filename. The filename of the file, <a class="el" href="structmscabd__file.html#o1">mscabd_file::filename</a>, is not used by <a class="el" href="structmschm__decompressor.html#o2">extract()</a>, but can be used by the caller as a guide for constructing an appropriate filename.<p>
This method works both with files found in the <a class="el" href="structmschmd__header.html#o5">mschmd_header::files</a> and <a class="el" href="structmschmd__header.html#o6">mschmd_header::sysfiles</a> list and <a class="el" href="structmschmd__file.html">mschmd_file</a> structures generated on the fly by <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the <a class="el" href="structmscab__decompressor.html">mscab_decompressor</a> instance being called </td></tr>
    <tr><td valign=top><em>file</em>&nbsp;</td><td>the file to be decompressed </td></tr>
    <tr><td valign=top><em>filename</em>&nbsp;</td><td>the filename of the file being written to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>an error code, or MSPACK_ERR_OK if successful </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="o5" doxytag="mschm_decompressor::fast_find" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int(* <a class="el" href="structmschm__decompressor.html#o5">mschm_decompressor::fast_find</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, struct <a class="el" href="structmschmd__header.html">mschmd_header</a> *chm, char *filename, struct <a class="el" href="structmschmd__file.html">mschmd_file</a> *f_ptr, int f_size)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finds file details quickly. 
<p>
Instead of reading all CHM helpfile headers and building a list of files, <a class="el" href="structmschm__decompressor.html#o4">fast_open()</a> and <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a> are intended for finding file details only when they are needed. The CHM file format includes an on-disk file index to allow this.<p>
Given a case-sensitive filename, <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a> will search the on-disk index for that file.<p>
If the file was found, the caller-provided <a class="el" href="structmschmd__file.html">mschmd_file</a> structure will be filled out like so:<ul>
<li>section: the correct value for the found file</li><li>offset: the correct value for the found file</li><li>length: the correct value for the found file</li><li>all other structure elements: NULL or 0</li></ul>
<p>
If the file was not found, MSPACK_ERR_OK will still be returned as the result, but the caller-provided structure will be filled out like so:<ul>
<li>section: NULL</li><li>offset: 0</li><li>length: 0</li><li>all other structure elements: NULL or 0</li></ul>
<p>
This method is intended to be used in conjunction with CHM helpfiles opened with <a class="el" href="structmschm__decompressor.html#o4">fast_open()</a>, but it also works with helpfiles opened using the regular <a class="el" href="structmschm__decompressor.html#o0">open()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the mschm_decompressor instance being called </td></tr>
    <tr><td valign=top><em>chm</em>&nbsp;</td><td>the CHM helpfile to search for the file </td></tr>
    <tr><td valign=top><em>filename</em>&nbsp;</td><td>the filename of the file to search for </td></tr>
    <tr><td valign=top><em>f_ptr</em>&nbsp;</td><td>a pointer to a caller-provded <a class="el" href="structmschmd__file.html">mschmd_file</a> structure </td></tr>
    <tr><td valign=top><em>f_size</em>&nbsp;</td><td><code>sizeof(struct mschmd_file)</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>MSPACK_ERR_OK, or an error code </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmschm__decompressor.html#o0">open()</a>, <a class="el" href="structmschm__decompressor.html#o1">close()</a>, <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a>, <a class="el" href="structmschm__decompressor.html#o2">extract()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="o4" doxytag="mschm_decompressor::fast_open" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structmschmd__header.html">mschmd_header</a>*(* <a class="el" href="structmschm__decompressor.html#o4">mschm_decompressor::fast_open</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, char *filename)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens a CHM helpfile quickly. 
<p>
If the file opened is a valid CHM helpfile, only essential headers will be read. A <a class="el" href="structmschmd__header.html">mschmd_header</a> structure will be still be returned, as with <a class="el" href="structmschm__decompressor.html#o0">open()</a>, but the <a class="el" href="structmschmd__header.html#o5">mschmd_header::files</a> field will be NULL. No files details will be automatically read. The <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a> method must be used to obtain file details.<p>
In the case of an error occuring, NULL is returned and the error code is available from <a class="el" href="structmschm__decompressor.html#o3">last_error()</a>.<p>
The filename pointer should be considered "in use" until <a class="el" href="structmschm__decompressor.html#o1">close()</a> is called on the CHM helpfile.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the mschm_decompressor instance being called </td></tr>
    <tr><td valign=top><em>filename</em>&nbsp;</td><td>the filename of the CHM helpfile. This is passed directly to <a class="el" href="structmspack__system.html#o0">mspack_system::open()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to a <a class="el" href="structmschmd__header.html">mschmd_header</a> structure, or NULL on failure </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmschm__decompressor.html#o0">open()</a>, <a class="el" href="structmschm__decompressor.html#o1">close()</a>, <a class="el" href="structmschm__decompressor.html#o5">fast_find()</a>, <a class="el" href="structmschm__decompressor.html#o2">extract()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="o3" doxytag="mschm_decompressor::last_error" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int(* <a class="el" href="structmschm__decompressor.html#o3">mschm_decompressor::last_error</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the error code set by the most recently called method. 
<p>
This is useful for <a class="el" href="structmschm__decompressor.html#o0">open()</a> and <a class="el" href="structmschm__decompressor.html#o4">fast_open()</a>, which do not return an error code directly.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the mschm_decompressor instance being called </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the most recent error code </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmschm__decompressor.html#o0">open()</a>, search() </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="o0" doxytag="mschm_decompressor::open" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structmschmd__header.html">mschmd_header</a>*(* <a class="el" href="structmschm__decompressor.html#o0">mschm_decompressor::open</a>)(struct <a class="el" href="structmschm__decompressor.html">mschm_decompressor</a> *this, char *filename)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens a CHM helpfile and reads its contents. 
<p>
If the file opened is a valid CHM helpfile, all headers will be read and a <a class="el" href="structmschmd__header.html">mschmd_header</a> structure will be returned, with a full list of files.<p>
In the case of an error occuring, NULL is returned and the error code is available from <a class="el" href="structmschm__decompressor.html#o3">last_error()</a>.<p>
The filename pointer should be considered "in use" until <a class="el" href="structmschm__decompressor.html#o1">close()</a> is called on the CHM helpfile.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>this</em>&nbsp;</td><td>a self-referential pointer to the mschm_decompressor instance being called </td></tr>
    <tr><td valign=top><em>filename</em>&nbsp;</td><td>the filename of the CHM helpfile. This is passed directly to <a class="el" href="structmspack__system.html#o0">mspack_system::open()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a pointer to a <a class="el" href="structmschmd__header.html">mschmd_header</a> structure, or NULL on failure </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmschm__decompressor.html#o1">close()</a> </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="mspack_8h-source.html">mspack.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 10 13:13:54 2004 for libmspack by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
